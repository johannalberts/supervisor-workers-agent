{% extends "base.html" %}

{% block extra_css %}
<style>
    /* Override base styles for chat interface */
    .main-content {
        padding: 0;
        height: calc(100vh - 60px);
    }
    
    .container {
        height: 100%;
        max-width: 100%;
        padding: 0;
    }
</style>
{% endblock %}

{% block content %}
<div class="chat-container">
    <!-- Chat Header -->
    <div class="chat-header">
        <div class="agent-info">
            <div class="agent-avatar">
                <span>🤖</span>
            </div>
            <div class="agent-details">
                <h2>Customer Service Assistant</h2>
                <span class="agent-status">
                    <span class="status-indicator online"></span>
                    Online
                </span>
            </div>
        </div>
        <div class="chat-actions">
            <button class="action-btn" title="Clear Chat" onclick="clearChat()">
                <span>🗑️</span>
            </button>
        </div>
    </div>

    <!-- Chat Messages Area -->
    <div class="chat-messages" id="chatMessages">
        <!-- Welcome Message -->
        <div class="message bot-message">
            <div class="message-avatar">🤖</div>
            <div class="message-content">
                <div class="message-bubble">
                    <p>Hello! 👋 I'm your customer service assistant. How can I help you today?</p>
                </div>
                <div class="message-time">Just now</div>
            </div>
        </div>

        <!-- Sample bot message with options -->
        <div class="message bot-message">
            <div class="message-avatar">🤖</div>
            <div class="message-content">
                <div class="message-bubble">
                    <p>I can help you with:</p>
                    <div class="quick-replies">
                        <button class="quick-reply-btn" onclick="handleQuickReply('Product information')" disabled>
                            📦 Product information
                        </button>
                        <button class="quick-reply-btn" onclick="handleQuickReply('What is the status of my order?')">
                            📋 Order status
                        </button>
                        <button class="quick-reply-btn" onclick="handleQuickReply('I want to return my order')">
                            🔄 Returns & refunds
                        </button>
                        <button class="quick-reply-btn" onclick="handleQuickReply('Technical support')" disabled>
                            🔧 Technical support
                        </button>
                        <button class="quick-reply-btn" onclick="handleQuickReply('Account management')" disabled>
                            👤 Account management
                        </button>
                    </div>
                </div>
                <div class="message-time">Just now</div>
            </div>
        </div>
    </div>

    <!-- Chat Input Area -->
    <div class="chat-input-container">
        <div class="chat-input-wrapper">
            <textarea 
                id="messageInput" 
                class="chat-input" 
                placeholder="Type your message here..."
                rows="1"
                onkeydown="handleKeyDown(event)"
            ></textarea>
            <button class="send-button" onclick="sendMessage()" id="sendButton">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        <div class="input-hint">
            Press Enter to send, Shift+Enter for new line
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', path='/js/chat.js') }}"></script>
{% endblock %}
